Modules.create do

    app_module :mod1 do

        cores 1

        execution do

                   for i in 1..2

                   calculate "10s"

                   spawn  :id=>:sp1, :module=>:mod2, :instances=>1, :data_send=>"20MB",  :data_receive =>"20MB"

                   calculate "100"

                   receive :sp1

                   calculate "50 s"
                  end
  
   
          end

     end

      app_module :mod2 do

              cores 2

             execution do
                     calculate "10s"
              end

      end

end

Modules.execute :mod1
Modules.execute :mod2
